# **文档管理系统与云南储能项目开发工具集需求说明书**

## **1\. 引言**

### **1.1 目的**

本文档旨在明确定义“文档管理系统”和“云南储能电站项目开发工具集”的功能需求、非功能需求、技术架构、用户特性及系统约束。本文档将作为项目开发、测试和验收的主要依据。

### **1.2 项目范围**

本项目包含两大部分：

1.  **文档管理系统**: 用于管理用户上传的HTML文档和原始文档（如Word、PDF等），提供主页展示和后台管理功能。
2.  **云南储能电站项目开发工具集**: 集成经济测算、选址辅助、项目信息管理等功能，并支持从网络搜集补充信息，辅助云南储能电站项目的开发决策。

### **1.3 定义、首字母缩写词和缩略语**

- **SRS**: Software Requirements Specification (软件需求说明书)
- **HTML**: HyperText Markup Language (超文本标记语言)
- **DOCX**: Office Open XML Document (Word文档格式)
- **PDF**: Portable Document Format (便携式文档格式)
- **LFP**: Lithium Iron Phosphate (磷酸铁锂)
- **BESS**: Battery Energy Storage System (电池储能系统)
- **EPC**: Engineering, Procurement, and Construction (设计、采购、施工总承包)
- **IRR**: Internal Rate of Return (内部收益率)
- **NPV**: Net Present Value (净现值)
- **PBP**: Payback Period (投资回收期)
- **LCOS**: Levelized Cost of Storage (度电成本/平准化储能成本)
- **EMS**: Energy Management System (能量管理系统)
- **PCS**: Power Conversion System (储能变流器)
- **BMS**: Battery Management System (电池管理系统)
- **GUI**: Graphical User Interface (图形用户界面)
- **API**: Application Programming Interface (应用程序编程接口)
- **DB**: Database (数据库)
- **OS**: Operating System (操作系统)

### **1.4 参考资料**

- 用户提供的项目需求描述。
- 用户上传的云南储能项目相关文档：
    - 《云南省100MW:200MWh磷酸铁锂储能电站投资收益分析报告.docx》
    - 《云南储能电站最优运营策略.docx》
    - 《云南省新型储能电站开发：政策、流程与市场综合指南.docx》
    - 《云南省新型储能电站选址适宜性分析报告.docx》
    - 《共享储能电站收益分析V26.html》
    - 《云南省新型共享储能电站投资收益分析报告.docx》
    - 《共享储能电站辅助服务贡献量估算工具V3.html》
    - 《云南省共享储能电站各项辅助服务贡献量估算模型分析报告.docx》
- Node.js, Express.js, SQLite 相关技术文档。

### **1.5 文档概述**

本文档后续章节将详细描述系统总体情况、文档管理系统的具体需求、云南储能电站项目开发工具集的具体需求、系统架构以及非功能性需求等。

## **2\. 总体描述**

### **2.1 产品愿景**

本系统旨在提供一个高效、易用的文档管理平台，同时集成一套专业的云南储能电站项目开发辅助工具。通过此系统，用户可以方便地管理其项目文档，并利用工具集进行项目前期的经济测算、选址分析和信息管理，从而提高项目开发效率和决策质量。

### **2.2 产品功能**

#### **2.2.1 文档管理系统核心功能**

- **主页展示**: 简要展示所有已上传并转换为HTML的文档（如缩略图、标题、摘要等）。
- **后台管理**:
    - 用户认证与多角色管理。
    - 文档上传（HTML及原始格式）。
    - 原始文档自动转换为HTML（可选）。
    - 文档列表展示与筛选。
    - 文档删除。
    - 文档元数据编辑（如标题、作者、关键词、分类等）。
    - 文档文件重命名。
    - 文档分类/文件夹管理。

#### **2.2.2 云南储能电站项目开发工具集核心功能**

- **经济测算**:
    - 基于输入参数（如投资成本、电价、运维成本、融资条件、税收政策等）进行储能电站项目的投资回报分析（IRR, NPV, PBP, LCOS等）。
    - 支持多种储能技术类型（如磷酸铁锂、液流电池等）的参数化模型。
    - 参考用户上传的收益分析报告和HTML工具进行模型设计。
- **选址辅助**:
    - 基于地理信息、电网条件、政策区域、资源分布、环境约束等因素，提供选址适宜性分析。
    - 参考用户上传的选址报告。
- **项目信息管理**:
    - 结构化管理储能项目的基础信息、政策文件、技术参数、市场数据等。
    - 关联相关文档和分析结果。
- **在线信息搜集**:
    - 提供工具或接口，允许用户指定关键词或信息源，从互联网搜集与云南储能项目相关的最新政策、市场动态、技术进展等信息。
    - 对搜集的信息进行初步整理和归类。

### **2.3 用户特征**

- **管理员**: 负责系统维护、用户管理、全局配置等。
- **项目经理/分析师**: 主要使用文档管理系统进行文档操作，并深度使用储能项目开发工具集进行项目分析和决策。
- **普通用户/查阅者**: 可能仅有权限浏览主页展示的HTML文档或特定类别的文档。

### **2.4 运行环境**

- **开发环境**: macOS, WebStorm。
- **部署环境**: Debian Linux, Apache Web服务器（用于前端静态资源或反向代理Node.js应用）。
- **后端**: Node.js (Express.js框架)。
- **数据库**: SQLite。
- **浏览器**: 支持主流现代浏览器（Chrome, Firefox, Edge, Safari）。

### **2.5 设计与实现约束**

- 后端技术栈固定为Node.js (Express.js) 和 SQLite。
- 前端展示需考虑HTML页面的缩略图预览。
- 用户认证需支持多用户及角色管理。
- 原始文档处理（如Word到HTML的转换）应提供选项，允许用户选择是否执行自动转换。
- 系统需部署在用户指定的虚拟主机上。

### **2.6 假设与依赖**

- 假设用户虚拟主机环境满足Node.js、SQLite及Apache的运行要求。
- 假设用户提供的文档内容可用于工具集的功能实现和数据参考。
- 原始文档到HTML的转换质量依赖于所选用的转换库或服务。
- 在线信息搜集功能的有效性依赖于目标网站的结构和反爬机制。

## **3\. 文档管理系统具体需求**

### **3.1 功能需求**

#### **3.1.1 用户认证与角色管理 (FUR-DM-001)**

- **FUR-DM-001.1**: 系统应提供用户注册功能。
- **FUR-DM-001.2**: 系统应提供用户登录功能，通过用户名和密码进行验证。
- **FUR-DM-001.3**: 系统应支持至少三种用户角色：管理员、项目经理/分析师、普通用户。
- **FUR-DM-001.4**: 管理员应能创建、编辑、删除用户账户，并分配用户角色。
- **FUR-DM-001.5**: 不同角色应具有不同的操作权限。例如：
    - 管理员：拥有所有后台管理权限。
    - 项目经理/分析师：拥有文档上传、编辑、删除、分类等权限，可使用工具集。
    - 普通用户：主要拥有文档查阅权限。
- **FUR-DM-001.6**: 系统应提供密码找回或重置功能。

#### **3.1.2 主页展示 (FUR-DM-002)**

- **FUR-DM-002.1**: 主页应以列表或网格形式展示已上传并公开的HTML文档。
- **FUR-DM-002.2**: 每个HTML文档应显示缩略图预览、标题、上传日期、分类等基本信息。
    - 缩略图生成方式需确定（例如，截取HTML页面首屏，或使用预设图片）。
- **FUR-DM-002.3**: 用户点击主页上的文档条目应能跳转到该HTML文档的完整展示页面。
- **FUR-DM-002.4**: 主页应提供搜索功能，允许用户根据关键词搜索文档。
- **FUR-DM-002.5**: 主页应提供按分类、上传日期等条件的筛选/排序功能。

#### **3.1.3 后台管理 - 文档上传 (FUR-DM-003)**

- **FUR-DM-003.1**: 授权用户（如项目经理/分析师）应能通过后台上传文件。
- **FUR-DM-003.2**: 支持上传HTML文件。
- **FUR-DM-003.3**: 支持上传原始文档格式，如 .docx, .pdf, .txt, .md 等。
- **FUR-DM-003.4**: 上传时，用户应能指定文档的初始元数据，如标题、分类。
- **FUR-DM-003.5**: 系统应提供选项，允许用户选择是否在上传原始文档后自动将其转换为HTML格式。
    - 若选择转换，系统应调用相应的转换模块处理文件。
    - 转换成功后，生成的HTML文件与原始文件关联。
- **FUR-DM-003.6**: 系统应处理文件上传过程中的错误，并向用户提供明确的反馈。
- **FUR-DM-003.7**: 系统应检查上传文件的大小和类型，防止恶意文件上传。

#### **3.1.4 后台管理 - 原始文档自动转换为HTML (FUR-DM-004)**

- **FUR-DM-004.1**: 系统应集成或调用库/工具，实现将 .docx, .pdf 等常见原始文档格式转换为HTML格式。
- **FUR-DM-004.2**: 转换过程应尽可能保留原文的格式和内容。
- **FUR-DM-004.3**: 用户可选择是否对上传的原始文档执行此转换。
- **FUR-DM-004.4**: 转换失败时，系统应记录错误并通知用户。

#### **3.1.5 后台管理 - 文档列表 (FUR-DM-005)**

- **FUR-DM-005.1**: 后台应提供所有已上传文档的列表视图。
- **FUR-DM-005.2**: 列表应显示文档的关键信息，如文件名、标题、类型（原始/HTML）、上传日期、大小、分类、创建者等。
- **FUR-DM-005.3**: 提供搜索功能，允许管理员或授权用户按文件名、标题、内容（若可索引）、元数据等搜索文档。
- **FUR-DM-005.4**: 提供筛选功能，允许按文档类型、分类、上传日期范围等筛选文档。
- **FUR-DM-005.5**: 提供排序功能，允许按文件名、上传日期、大小等字段排序。

#### **3.1.6 后台管理 - 文档删除 (FUR-DM-006)**

- **FUR-DM-006.1**: 授权用户应能删除指定的文档（包括原始文件及其关联的HTML文件）。
- **FUR-DM-006.2**: 删除前应有确认提示，防止误操作。
- **FUR-DM-006.3**: 可考虑提供回收站功能，允许在一定期限内恢复已删除的文档（可选高级功能）。

#### **3.1.7 后台管理 - 编辑元数据 (FUR-DM-007)**

- **FUR-DM-007.1**: 授权用户应能编辑已上传文档的元数据。
- **FUR-DM-007.2**: 可编辑的元数据至少包括：标题、作者、关键词、描述/摘要、所属分类。
- **FUR-DM-007.3**: 元数据的更改应实时反映在文档列表和主页展示中。

#### **3.1.8 后台管理 - 重命名文件 (FUR-DM-008)**

- **FUR-DM-008.1**: 授权用户应能重命名服务器上存储的文档物理文件名。
- **FUR-DM-008.2**: 重命名时应检查文件名的合法性和唯一性。
- **FUR-DM-008.3**: 重命名操作不应影响文档的访问链接或内部关联（如有）。

#### **3.1.9 后台管理 - 分类/文件夹管理 (FUR-DM-009)**

- **FUR-DM-009.1**: 管理员或授权用户应能创建、编辑、删除文档分类（或文件夹）。
- **FUR-DM-009.2**: 支持多级分类/文件夹结构。
- **FUR-DM-009.3**: 用户在上传或编辑文档时，可以将其归入一个或多个分类。
- **FUR-DM-009.4**: 文档列表和主页展示应能按分类进行筛选和浏览。
- **FUR-DM-009.5**: 删除分类时，应处理该分类下文档的归属问题（例如，移至默认分类或提示用户重新分配）。

### **3.2 非功能需求**

#### **3.2.1 性能需求 (NFUR-DM-001)**

- **NFUR-DM-001.1**: 主页文档列表加载时间在常规网络条件下应不超过3秒（假设文档数量在1000以内）。
- **NFUR-DM-001.2**: 后台文档列表加载和搜索响应时间应不超过5秒（假设文档数量在5000以内）。
- **NFUR-DM-001.3**: 文件上传速度取决于网络带宽，但系统处理上传文件的开销应尽可能小。
- **NFUR-DM-001.4**: Word到HTML的转换时间应在可接受范围内（例如，对于一个10MB的Word文档，转换时间不超过30秒）。

#### **3.2.2 安全需求 (NFUR-DM-002)**

- **NFUR-DM-002.1**: 用户密码应加密存储。
- **NFUR-DM-002.2**: 防止常见的Web攻击，如XSS, CSRF, SQL注入（虽然SQLite的风险模式不同，但仍需注意查询构建）。
- **NFUR-DM-002.3**: 对上传文件进行安全检查，防止上传恶意脚本或可执行文件。
- **NFUR-DM-002.4**: 实施基于角色的访问控制，确保用户只能访问其授权的资源和功能。
- **NFUR-DM-002.5**: 考虑HTTPS部署以保障数据传输安全。

#### **3.2.3 可用性需求 (NFUR-DM-003)**

- **NFUR-DM-003.1**: 用户界面应简洁、直观，易于学习和使用。
- **NFUR-DM-003.2**: 提供清晰的操作指引和错误提示。
- **NFUR-DM-003.3**: 系统应具有良好的响应性，避免用户长时间等待。
- **NFUR-DM-003.4**: 兼容主流现代浏览器。

#### **3.2.4 可靠性需求 (NFUR-DM-004)**

- **NFUR-DM-004.1**: 系统应能7x24小时稳定运行（除计划维护外）。
- **NFUR-DM-004.2**: SQLite数据库应定期备份，防止数据丢失。
- **NFUR-DM-004.3**: 文件转换失败不应导致系统崩溃，应能优雅处理错误。

#### **3.2.5 可维护性需求 (NFUR-DM-005)**

- **NFUR-DM-005.1**: 代码应结构清晰、注释良好，易于理解和修改。
- **NFUR-DM-005.2**: 模块化设计，降低模块间的耦合度。
- **NFUR-DM-005.3**: 提供日志记录功能，方便问题排查和系统监控。

## **4\. 云南储能电站项目开发工具集具体需求**

### **4.1 功能需求**

#### **4.1.1 经济测算模块 (FUR-TK-001)**

- **FUR-TK-001.1**: 提供用户界面，允许输入储能项目经济测算所需的各项参数。包括但不限于：
    - 项目基本参数：额定功率(MW)、额定容量(MWh)、储能时长(h)、技术类型（LFP, 液流等）、设计寿命(年)。
    - 成本参数：单位容量投资成本(元/kWh或元/Wh)、其他初始投资比例(%)、年运维成本率(%)、电池更换时间点(年)、电池更换成本单价(元/kWh)。
    - 融资参数：贷款比例(%)、贷款年利率(%)、贷款期限(年)。
    - 税务参数：所得税率(%)、增值税销项/进项税率(%)、是否适用西部大开发税收优惠。
    - 运营参数：年等效满充满放次数、平均放电深度(DoD)、系统综合效率(%)、年容量衰减率(%)。
    - 市场与政策参数（云南）：高峰放电电价(元/kWh)、低谷充电电价(元/kWh)、充电输配及附加费减免情况、容量租赁价格(元/kW·年)、容量租赁签约率(%)、各类辅助服务补偿标准及预计年服务量。
- **FUR-TK-001.2**: 系统应能基于输入参数，计算并展示项目的全生命周期（如15年或20年）现金流量表。
- **FUR-TK-001.3**: 计算并展示关键财务指标：
    - 项目税前/税后内部收益率 (Project IRR)
    - 股权税后内部收益率 (Equity IRR)
    - 项目净现值 (Project NPV)
    - 股权净现值 (Equity NPV)
    - 静态/动态投资回收期 (PBP/DPP)
    - 度电成本 (LCOS) - (可选，计算较复杂)
- **FUR-TK-001.4**: 允许用户保存输入的参数方案和测算结果。
- **FUR-TK-001.5**: 提供参数敏感性分析功能（例如，通过调整关键输入参数观察财务指标变化）。
- **FUR-TK-001.6**: 模型的参数和计算逻辑应参考用户提供的《云南省100MW:200MWh磷酸铁锂储能电站投资收益分析报告.docx》、《共享储能电站收益分析V26.html》等文档。
- **FUR-TK-001.7**: 考虑云南省分时电价政策（如2025年1月1日起执行的新政策，含午间低谷）和辅助服务市场规则（如南方区域“两个细则”2025年版）。
- **FUR-TK-001.8**: 考虑储能容量衰减对能量市场收益的影响。
- **FUR-TK-001.9**: 允许用户选择是否考虑电池更换成本及其对现金流和折旧的影响。

#### **4.1.2 选址辅助模块 (FUR-TK-002)**

- **FUR-TK-002.1**: 提供地图界面（可集成第三方地图服务API），展示云南省地理信息。
- **FUR-TK-002.2**: 允许用户输入或在地图上选择潜在的项目区域或点位。
- **FUR-TK-002.3**: 集成或允许用户导入以下图层或数据：
    - 电网数据：主要变电站位置、电压等级、输电线路走向、电网阻塞区域等。
    - 可再生能源资源分布：风能、太阳能资源图谱。
    - 负荷中心：主要城市、工业园区位置。
    - 政策区域：如特定开发区、享受优惠政策的区域。
    - 环境敏感区：生态保护红线、自然保护区、水源保护区等。
    - 地质灾害风险区。
- **FUR-TK-002.4**: 提供分析工具，根据用户选择的权重或预设规则，对候选区域或点位的选址适宜性进行评分或可视化展示。
- **FUR-TK-002.5**: 参考用户提供的《云南省新型储能电站选址适宜性分析报告.docx》中的评估维度和方法。
- **FUR-TK-002.6**: 允许用户保存选址分析结果和相关图层信息。

#### **4.1.3 项目信息管理模块 (FUR-TK-003)**

- **FUR-TK-003.1**: 提供结构化的表单或界面，用于记录和管理云南储能项目的关键信息。
    - 项目基本信息：项目名称、地点、业主、规划容量、技术路线、状态（规划/在建/运营）等。
    - 政策文件库：关联存储与项目相关的国家及地方政策文件（可链接到文档管理系统中的文档）。
    - 技术参数：详细记录储能系统设计参数、设备型号等。
    - 市场数据：记录相关的电价信息、辅助服务市场规则、竞争态势等。
    - 审批进度：跟踪项目备案、核准、环评、并网等关键节点的审批状态和文件。
- **FUR-TK-003.2**: 允许将经济测算结果、选址分析报告与特定项目关联。
- **FUR-TK-003.3**: 提供项目信息的搜索、筛选和导出功能。
- **FUR-TK-003.4**: 参考《云南省新型储能电站开发：政策、流程与市场综合指南.docx》梳理项目开发流程和所需信息。

#### **4.1.4 在线信息搜集模块 (FUR-TK-004)**

- **FUR-TK-004.1**: 提供界面允许用户输入关键词（如“云南储能政策”、“储能招标”、“碳酸锂价格”等）和指定信息来源网站（如政府官网、行业新闻网站）。
- **FUR-TK-004.2**: 系统应能根据用户输入，定期或按需爬取指定网站的相关信息。
- **FUR-TK-004.3**: 对爬取到的信息进行初步的去重、提取关键内容（如标题、发布日期、摘要、正文链接）。
- **FUR-TK-004.4**: 将搜集到的信息进行展示，并允许用户按来源、日期、关键词等进行筛选和排序。
- **FUR-TK-004.5**: 允许用户将有价值的信息条目标记或保存到项目信息管理模块。
- **FUR-TK-004.6**: 需考虑网站的反爬虫策略，并遵守robots.txt协议。
- **FUR-TK-004.7**: 重点关注云南省及国家能源局、发改委等官方网站的政策发布。

### **4.2 数据需求 (NDFUR-TK-001)**

- **NDFUR-TK-001.1**: 工具集应能利用用户上传的文档（如收益分析报告、选址报告、政策指南）作为模型参数、计算逻辑和信息来源的参考。
- **NDFUR-TK-001.2**: 经济测算模块所需的默认参数（如成本、效率、电价）应基于当前市场情况和云南省的特点进行预设，并允许用户修改。
- **NDFUR-TK-001.3**: 选址模块所需的地理信息数据、电网数据等，需要确定数据来源和更新机制（例如，通过API接入、手动导入Shapefile或GeoJSON等）。
- **NDFUR-TK-001.4**: 在线信息搜集模块产生的数据（网页链接、摘要等）需存储并管理。

### **4.3 非功能需求**

参照文档管理系统的非功能需求（性能、安全、可用性、可靠性、可维护性），工具集模块也应满足类似要求，特别是：

- **性能 (NFUR-TK-001)**: 经济测算模型的计算响应时间应在用户可接受范围内（例如，复杂场景不超过10秒）。地图加载和空间分析操作应流畅。
- **准确性 (NFUR-TK-002)**: 经济测算和选址分析模型的计算结果应准确可靠，计算公式和逻辑需经过验证。
- **可扩展性 (NFUR-TK-003)**: 工具集的模块设计应易于扩展，方便未来增加新的分析工具或功能。

## **5\. 系统接口**

### **5.1 外部接口**

- **地图服务API (可选)**: 若选址模块使用在线地图服务，需定义与地图API的接口。
- **在线信息源**: 在线信息搜集模块需通过HTTP/HTTPS与目标网站交互。
- **文档转换服务 (可选)**: 若使用外部服务进行文档转换，需定义接口。

### **5.2 内部接口**

- 文档管理系统与工具集之间可能存在数据共享，例如工具集引用文档系统中的政策文件。

## **6\. 系统架构（高层）**

### **6.1 技术栈**

- **后端**: Node.js (Express.js)
- **数据库**: SQLite
- **前端**: HTML, CSS, JavaScript (具体框架待定，可考虑轻量级框架或原生JS以简化部署)
- **文档转换库**: 例如 Pandoc (需服务器端支持), Mammoth.js (for .docx to HTML in JS), PDF.js (for PDF rendering/text extraction).
- **网页爬虫库**: 例如 Cheerio, Puppeteer (Node.js环境).

### **6.2 部署架构**

- **Web服务器**: Apache (可用于反向代理Node.js应用及托管静态文件)。
- **应用服务器**: Node.js 运行环境。
- **数据库服务器**: SQLite 文件数据库，直接由Node.js应用访问。

## **7\. 非功能需求（全局）**

本节总结适用于整个系统的通用非功能需求。

### **7.1 界面与用户体验 (GUI)**

- 界面设计应现代、简洁、专业。
- 导航清晰，用户操作流程符合直觉。
- 重要操作应有二次确认，防止误操作。
- 提供必要的帮助文档或操作提示。

### **7.2 国际化与本地化**

- 当前系统主要面向中文用户，界面语言为中文。

### **7.3 文档要求**

- 除了本SRS文档外，还需提供：
    - 系统设计文档 (SDD)
    - 用户手册
    - 测试计划和测试报告

## **8\. 未来考虑**

- **移动端适配**: 考虑未来对系统进行移动端优化或开发移动应用。
- **高级数据分析与可视化**: 在工具集中引入更高级的数据分析和图表可视化功能。
- **协作功能**: 允许多用户在工具集内对项目信息进行协作编辑。
- **云存储集成**: 支持将文档存储到云存储服务（如阿里云OSS、腾讯云COS等）。
- **更智能的文档处理**: 利用NLP技术对文档内容进行智能提取、摘要、问答等。